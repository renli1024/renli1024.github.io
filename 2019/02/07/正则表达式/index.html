<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>正则表达式 | Ren Li&#39;s blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="Ren Li's Blog" />
  
  <meta name="description" content="因为正则表达式的在文本处理，字符串匹配中有着重要应用，因此本文对其基本语法规则及在Python中的应用进行了简要介绍。">
<meta name="keywords" content="正则表达式">
<meta property="og:type" content="article">
<meta property="og:title" content="正则表达式">
<meta property="og:url" content="https://renli1024.github.io/2019/02/07/正则表达式/index.html">
<meta property="og:site_name" content="Ren Li&#39;s blog">
<meta property="og:description" content="因为正则表达式的在文本处理，字符串匹配中有着重要应用，因此本文对其基本语法规则及在Python中的应用进行了简要介绍。">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2019-07-26T11:31:46.762Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="正则表达式">
<meta name="twitter:description" content="因为正则表达式的在文本处理，字符串匹配中有着重要应用，因此本文对其基本语法规则及在Python中的应用进行了简要介绍。">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  <script src="/js/pace.min.js"></script>
  

  
  

</head>

<body>
  <div id="container">
      <header id="header">
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">Ren Li&#39;s Blog</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a  href="/">
                        <i class="fa fa-home"></i>
                        <span>Home</span>
                    </a>
                    
                    <a  href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>Archives</span>
                    </a>
                    
                    <a  href="https://github.com/lrStyle">
                        <i class="fa fa-user"></i>
                        <span>Github</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-正则表达式" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      正则表达式
    </h1>
    <div class="post-title-bar">
      <ul>
          
        <li>
          <i class="fa fa-calendar"></i>  2019-02-07
        </li>
        
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML" async></script>

<p>因为正则表达式的在文本处理，字符串匹配中有着重要应用，因此本文对其基本语法规则及在Python中的应用进行了简要介绍。<br><a id="more"></a><br>注：本文大部分是对博文<a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">正则表达式30分钟入门教程</a>，<a href="http://lizec.top/2017/08/08/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%AC%94%E8%AE%B0/" target="_blank" rel="noopener">LiZeC的正则表达式笔记</a>以及<a href="https://docs.python.org/3.6/library/re.html" target="_blank" rel="noopener">python re库官方文档</a>的归纳和整理，更详细内容可查阅原文。</p>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><table>
<thead>
<tr>
<th style="text-align:center">正则表达式</th>
<th style="text-align:left">要匹配的字符串</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>\bhi\b</code></td>
<td style="text-align:left">单词“hi” <br> 不能直接用<code>hi</code>来匹配，否则会将him,history,high等单词也匹配上）</td>
</tr>
<tr>
<td style="text-align:center"><code>\bhi\b.*\bLucy\b</code></td>
<td style="text-align:left">hi后面不远处跟着一个Lucy</td>
</tr>
<tr>
<td style="text-align:center"><code>0\d{2}-\d{8}</code></td>
<td style="text-align:left">以0开头，然后是两个数字，然后是一个连字号“-”，最后是8个数字<br>(也就是中国的电话号码)</td>
</tr>
<tr>
<td style="text-align:center"><code>\ba\w*\b</code></td>
<td style="text-align:left">以字母a开头的单词</td>
</tr>
<tr>
<td style="text-align:center"><code>^[A-Za-z]+$</code></td>
<td style="text-align:left">由26个字母组成的字符串</td>
</tr>
<tr>
<td style="text-align:center"><code>^[A-Za-z0-9]+$</code></td>
<td style="text-align:left">由26个字母和数字组成的字符串</td>
</tr>
<tr>
<td style="text-align:center"><code>^[0-9]*[1-9][0-9]*$</code></td>
<td style="text-align:left">正整数形式的字符串（不能全0）</td>
</tr>
<tr>
<td style="text-align:center"><code>(\d{1,3}\.){3}\d{1,3}</code></td>
<td style="text-align:left">IP地址表达式（应用了分组的概念）</td>
</tr>
</tbody>
</table>
<ul>
<li>对于上述IP地址匹配，一个缺点是将256.300.888.999这种不可能存在的IP地址也匹配了。如果能使用算术比较的话，或许能简单地解决这个问题，但是正则表达式中并不提供关于数学的任何功能，所以只能使用冗长的分组，选择，字符类来描述一个正确的IP地址：<code>((2[0-4]\d|25[0-5]|[01]?\d\d?)\.){3}(2[0-4]\d|25[0-5]|[01]?\d\d?)</code></li>
<li><code>0\d{2}-\d{8}|0\d{3}-\d{7}</code>：这个表达式能匹配两种以连字号分隔的电话号码（应用了分支条件）：<br>一种是三位区号，8位本地号(如010-12345678)，一种是4位区号，7位本地号(0376-2233445)|</li>
</ul>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><ul>
<li>正则表达式(regular expression)描述了一种字符串匹配的模式(pattern)，主要用来匹配特定的字符串。</li>
<li>正则表达式中分为普通字符和特殊字符，普通字符表示匹配和其相同的字符；特殊字符并不匹配他们本身，而是有特殊含义的，具体有：<code>. ^ $ * + ? { } [ ] \ | ( )</code>，除了这些特殊字符外都是普通字符。</li>
<li>若要匹配这些字符本身，则需要加上<code>\</code>进行转义（escape），如<code>\*</code>表示匹配<code>*</code>本身。</li>
<li>因为python字符串也是使用<code>\</code>作为转义字符，因此在python中使用正则表达式需要再加一个反斜杠，即用<code>\\</code>表示转义；也可以用原声字符串的形式，即在字符串前面加，如<code>r&quot;\w&quot;</code>。</li>
</ul>
<h3 id="一些特殊字符含义"><a href="#一些特殊字符含义" class="headerlink" title="一些特殊字符含义"></a>一些特殊字符含义</h3><table>
<thead>
<tr>
<th style="text-align:center">&nbsp;&nbsp;&nbsp;&nbsp;字符&nbsp;&nbsp;&nbsp;&nbsp;</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">.</td>
<td style="text-align:center">匹配任意单个字符(除换行符“\n”外)</td>
</tr>
<tr>
<td style="text-align:center">()</td>
<td style="text-align:center">指定分组</td>
</tr>
<tr>
<td style="text-align:center">[]</td>
<td style="text-align:center">指定字符类</td>
</tr>
<tr>
<td style="text-align:center">{}</td>
<td style="text-align:center">指定重复次数</td>
</tr>
<tr>
<td style="text-align:center">\s</td>
<td style="text-align:center">匹配任意的空白符，包括包括空格，制表符(Tab)，换行符，中文全角空格等</td>
</tr>
<tr>
<td style="text-align:center">\w</td>
<td style="text-align:center">匹配任意字母、数字、下划线、汉字（即匹配普通字符）</td>
</tr>
<tr>
<td style="text-align:center">\s</td>
<td style="text-align:center">匹配任意的空白符（空格、制表符(Tab)、换行符、中文全角空格等）</td>
</tr>
<tr>
<td style="text-align:center">\d</td>
<td style="text-align:center">匹配数字（0-9）</td>
</tr>
<tr>
<td style="text-align:center">\b</td>
<td style="text-align:center">检测单词的开始或结束（单词边界），如空格，标点符号或者换行<br>但\b并不匹配这些单词分隔字符中的任何一个，它只匹配一个位置</td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">检测字符串的开始</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:center">检测字符串的结束</td>
</tr>
</tbody>
</table>
<ul>
<li>一些字符的反义表示<br>如<code>\w</code>，<code>\b</code>这些特殊字符的大写表示相反的含义，具体如下：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">&nbsp;&nbsp;&nbsp;&nbsp;字符&nbsp;&nbsp;&nbsp;</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">\W</td>
<td style="text-align:center">匹配不是字母、数字、下划线、汉字的字符（多用来匹配特殊字符）</td>
</tr>
<tr>
<td style="text-align:center">\S</td>
<td style="text-align:center">匹配任意不是空白符的字符</td>
</tr>
<tr>
<td style="text-align:center">\D</td>
<td style="text-align:center">匹配任意非数字的字符</td>
</tr>
<tr>
<td style="text-align:center">\B</td>
<td style="text-align:center">匹配不是单词开头或结束的位置</td>
</tr>
</tbody>
</table>
<h3 id="关于-b的一些说明"><a href="#关于-b的一些说明" class="headerlink" title="关于\b的一些说明"></a>关于\b的一些说明</h3><ul>
<li>注：<code>\b, ^, $</code>匹配的并不是字符，而是一个位置<br>如对于<code>\blove\b</code>，用来匹配句子”I love youlove “，其匹配出来的只有第一个love，第二个love不会匹配；其次其只匹配第一个love这个单词本身，而不包括其两端的空格（因为\b只只是检测单词边界，如空格，标点符号或者换行，而并不匹配这些字符）。</li>
<li>所以如果想要检测单词边界，同时匹配空白符，则需要再指定<code>\s</code>。</li>
<li>eg.匹配连续出现三次的单词，如果中间不加\s就匹配不出来（\b只匹配位置，不匹配任何字符）；同时前后最好用\b来指定，因为这个单词可能在一行的开始（前面无任何字符），或者最后一个单词后面接了\n等情况。<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">repeat_elements = re.findall(<span class="string">r"\b(\w+)\b\s\1\b\s\1\b"</span>, <span class="string">"123 mention mention mention 321 123"</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="重复匹配限定符"><a href="#重复匹配限定符" class="headerlink" title="重复匹配限定符"></a>重复匹配限定符</h3><p>以下字符称为“限定符”（限制次数的符号），跟在特殊字符的<strong>后面</strong>，表示重复该字符特定次数。<br>如<code>\d+</code>匹配1个或更多个的数字。</p>
<table>
<thead>
<tr>
<th style="text-align:center">限定符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*</td>
<td style="text-align:center">重复\(\geq\)0次</td>
</tr>
<tr>
<td style="text-align:center">+</td>
<td style="text-align:center">重复\(\geq\)1次</td>
</tr>
<tr>
<td style="text-align:center">?</td>
<td style="text-align:center">重复0次或1次</td>
</tr>
<tr>
<td style="text-align:center">{n}</td>
<td style="text-align:center">重复n次</td>
</tr>
<tr>
<td style="text-align:center">{n,}</td>
<td style="text-align:center">重复\(\geq\)n次</td>
</tr>
<tr>
<td style="text-align:center">{n,m}</td>
<td style="text-align:center">重复n到m次</td>
</tr>
</tbody>
</table>
<h4 id="贪婪、懒惰匹配原则"><a href="#贪婪、懒惰匹配原则" class="headerlink" title="贪婪、懒惰匹配原则"></a>贪婪、懒惰匹配原则</h4><ul>
<li>正则表达式的匹配原则为贪婪匹配：即在满足条件的情况下，匹配<strong>尽可能多</strong>的字符。<br>eg. <code>a.*b</code>会匹配以a开始，以b结束的最长的字符串。如果用来搜索<code>aabab</code>，则会匹配整个字符串<code>aabab</code>而非<code>aab</code>。</li>
<li>若需要懒惰匹配：即匹配<strong>尽可能少</strong>的字符，就在相应的重复字符<strong>后</strong>加<code>?</code>即可。<br>eg. <code>a.*?b</code>匹配以a开始，以b结束的最短的字符串，搜索<code>aabab</code>会匹配到<code>aab</code>和<code>ab</code>两个子串（之所以没有仅仅匹配到<code>ab</code>子串，是因为正则表达式的匹配还会考虑开始的先后顺序，最开始匹配的优先级最高）。</li>
<li>懒惰匹配限定符如下：</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">限定符</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">*?</td>
<td style="text-align:center">重复\(\geq\)0次，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center">+?</td>
<td style="text-align:center">重复\(\geq\)1次，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center">??</td>
<td style="text-align:center">重复0次或1次，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center">{n,}?</td>
<td style="text-align:center">重复\(\geq\)n次，但尽可能少重复</td>
</tr>
<tr>
<td style="text-align:center">{n,m}?</td>
<td style="text-align:center">重复n到m次，但尽可能少重复</td>
</tr>
</tbody>
</table>
<h3 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h3><ul>
<li>在 <code>[</code> 和 <code>]</code> 中的若干字符构成一个字符类(character class)。</li>
<li>字符类是为了匹配某种字符集合，表示此位置可以匹配这个类中的任意一个字符。</li>
<li>整个字符类所起到的作用和普通字符相同，都是只匹配<strong>单个字符</strong>，因此字符类可作为整体再接受其他限定，如<code>? + {n,m}</code>等等。</li>
<li>可以使用<code>-</code>来表示一个范围，例如<code>[a-c]</code>表示<code>[abc]</code></li>
<li>在字符类中的特殊符号不被转义</li>
<li><strong>反向匹配：</strong>在字符类中，如果以^开头，则表示匹配除此字符类中提及的任何其他字符。如<code>[^5]</code>匹配任何不是5的字符。</li>
</ul>
<h3 id="分枝条件"><a href="#分枝条件" class="headerlink" title="分枝条件"></a>分枝条件</h3><ul>
<li>在正则表达式表示“或”的逻辑，两个条件用<code>|</code>连接即可。<br>eg. <code>\d{5}-\d{4}|\d{5}</code>这个表达式用于匹配美国的邮政编码。美国邮编的规则是5位数字，或者用连字号间隔的9位数字。</li>
<li>在使用分枝条件时要注意各个条件的<strong>顺序</strong>，如果上文改成<code>\d{5}|\d{5}-\d{4}</code>的话，那么就只会匹配5位的邮编(以及9位邮编的前5位)。因为一旦前面的分枝满足的话就不会再管其他条件了。</li>
</ul>
<h3 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h3><p>不推荐在正则表达式内部写注视，注释推荐写在正则表达式的外部语言中。</p>
<h2 id="正则表达式高级特性"><a href="#正则表达式高级特性" class="headerlink" title="正则表达式高级特性"></a>正则表达式高级特性</h2><h3 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h3><ul>
<li>上文提到了如何重复单个字符（直接在字符后面加表示重复的限定符即可），但若想重复多个字符，就需要用到<strong>分组</strong>的概念。</li>
<li>用小括号<code>()</code>来指定分组（也叫子表达式），之后就可以对这个分组的整体进行重复或其他操作。<br>eg. <code>(\d{1,3}\.){3}\d{1,3}</code>，就是一个比较粗糙的IP地址匹配式。</li>
</ul>
<h3 id="后向引用"><a href="#后向引用" class="headerlink" title="后向引用"></a>后向引用</h3><ul>
<li>使用小括号指定一个分组后，这个分组可以作为一个整体在后文中作进一步处理。</li>
<li>默认情况下，每个组会有一个<strong>组号</strong>，从左到右，第一个出现的分组组号为1(注意不是0)，第二个为2，以此类推。</li>
<li>如何引用：在后问中使用<code>\</code>+组号的形式来引用，如<code>\1</code>表示引用1号分组的。<br>eg. <code>\b(\w+)\b\s+\1\b</code>可以来匹配如go go 或kitty kitty 这种连着两个重复单词。</li>
</ul>
<h3 id="零宽断言"><a href="#零宽断言" class="headerlink" title="零宽断言"></a>零宽断言</h3><ul>
<li>用于查找在某些内容前面或后面的东西（但不包括这些内容），类似于<code>^ $ \b</code>这种占位符，用于指定一个位置，这个位置应该满足一定的条件(即断言)，因此被称为零宽断言。</li>
<li><code>(?=exp)</code>：用于匹配exp前面出现的表达式。<br>e.g <code>\b\w+(?=ing\b)</code>用于匹配以ing为结尾的单词的<strong>前面部分</strong>（不包括ing）</li>
<li><code>(?&lt;=exp)</code>：用于匹配exp后面出现的表达式。<br>e.g <code>(?&lt;=\bre)\w+\b</code>用于匹配以re开头的单词的<strong>后面部分</strong>（不包括re）</li>
<li>更多示例：<br><code>(?&lt;=\s)\d+(?=\s)</code>：匹配以空白符间隔的数字(不包括这些空白符)<br><code>((?&lt;=\d)\d{3})+\b</code>：要给一个很长的数字中每三位间加一个逗号(当然是从右边加起了)，你可以这样查找需要在前面和里面添加逗号的部分（用它对<code>1234567890</code>进行查找时结果是<code>234567890</code>）</li>
</ul>
<h3 id="负向零宽断言"><a href="#负向零宽断言" class="headerlink" title="负向零宽断言"></a>负向零宽断言</h3><ul>
<li>用于确保某个模式不会出现。与字符类<code>[^exp]</code>的区别：虽然不匹配这个字符，但字符类总是会匹配某个字符的，这会限制字符类的应用场景；而负向零宽断言不匹配字符，其只指代一个位置。<br>eg. 如果用<code>\b\w*q[^u]\w*\b</code>来匹配“出现了字母q,但是q后面跟的不是字母u”的单词，则像“Iraq, Benq”这种q直接作为最后一个字符的情况就会出错（字符类总要匹配一个字符），因此就需要负向零宽断言。</li>
<li><code>(?!exp)</code>：断言此位置的后面不能匹配表达式exp。<br>eg.<code>\b((?!abc)\w)+\b</code>匹配不包含连续字符串abc的单词</li>
<li><code>(?&lt;!exp)</code>：断言此位置的前面不能匹配表达式exp。<br>eg. <code>(?&lt;![a-z])\d{7}</code>匹配前面不是小写字母的七位数字。</li>
</ul>
<h3 id="递归匹配"><a href="#递归匹配" class="headerlink" title="递归匹配"></a>递归匹配</h3><ul>
<li>用于匹配一些嵌套的层次结构，如<code>(100*(50+15))</code>，如果只是简单地使用<code>\(.+\)</code>则只会匹配到最左边的左括号和最右边的右括号之间的内容。假如原来的字符串里的左括号和右括号出现的次数不相等，比如<code>(5/(3+2)))</code>，那我们的匹配结果里两者的个数也不会相等。如果想要想匹配到<strong>最长的，而且配对正确的</strong>字符串，就需要用到递归匹配。</li>
<li>具体内容参见博文<a href="http://deerchao.net/tutorials/regex/regex.htm" target="_blank" rel="noopener">正则表达式30分钟入门教程</a></li>
</ul>
<h2 id="在Python中使用正则表达式"><a href="#在Python中使用正则表达式" class="headerlink" title="在Python中使用正则表达式"></a>在Python中使用正则表达式</h2><p>example code<br><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找字符串中连续出现三次的子串（中间以空格分隔）</span></span><br><span class="line">list_result = re.findall(<span class="string">r"\b(\w+)\b\s\1\b\s\1\b"</span>, </span><br><span class="line">                        <span class="string">"123 mention mention mention 123 entity entity entity"</span>)</span><br><span class="line">print(list_result)</span><br><span class="line"><span class="comment"># ['mention', 'entity']</span></span><br><span class="line"></span><br><span class="line">match_result = re.finditer(<span class="string">r"\b(\w+)\b\s\1\b\s\1\b"</span>, </span><br><span class="line">                          <span class="string">"123 mention mention mention 123 entity entity entity"</span>)</span><br><span class="line"><span class="keyword">if</span> match_result == <span class="keyword">None</span>:</span><br><span class="line">    print(<span class="string">"no repeat elements"</span>)</span><br><span class="line"><span class="keyword">else</span>: </span><br><span class="line">    <span class="keyword">for</span> match <span class="keyword">in</span>  match_result:</span><br><span class="line">        print(match.group(), <span class="string">"start:"</span>, str(match.start())+<span class="string">","</span>,</span><br><span class="line">        <span class="string">"end:"</span>, str(match.end()))</span><br><span class="line"><span class="comment"># mention mention mention start: 4, end: 27</span></span><br><span class="line"><span class="comment"># entity entity entity start: 32, end: 52</span></span><br><span class="line"></span><br><span class="line">m = re.findall(<span class="string">r"(\w+) (\w+)"</span>, <span class="string">"Isaac Newton, physicist"</span>)</span><br><span class="line">print(m)</span><br><span class="line"><span class="comment"># [('Isaac', 'Newton')]，包含多个子分组的情况下会以tuple的形式返回</span></span><br></pre></td></tr></table></figure></p>
<h3 id="使用原生字符串"><a href="#使用原生字符串" class="headerlink" title="使用原生字符串"></a>使用原生字符串</h3><ul>
<li>正则表达式中使用<code>\n</code>表示转义，而python中恰好也使用<code>\n</code>表示转义，因此在python中使用正则表达式则需要<code>\\</code>来表示反斜杠。</li>
<li>为了节省过多的反斜杠，可以使用Python原生字符串特性，即在字符串开头加上<code>r</code>，如<code>r\d</code>，在这个字符串中每个字符表示其本身，Python不进行转义。</li>
</ul>
<h3 id="re库"><a href="#re库" class="headerlink" title="re库"></a>re库</h3><p>在Python中使用正则表达式直接导入<code>re</code>库即可 <code>import re</code>。</p>
<h4 id="常用函数介绍"><a href="#常用函数介绍" class="headerlink" title="常用函数介绍"></a>常用函数介绍</h4><ul>
<li>只是简单检测字符串是否存在，使用findall()函数即可；<br>否则使用finditer()，返回的match对象方便进行之后的操作；<br>替换、分隔操作直接使用split()、sub()函数；</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">函数（常用性排序从上至下）</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">re.findall()</td>
<td style="text-align:center">在字符串中查找所有满足条件的子串，返回string list</td>
</tr>
<tr>
<td style="text-align:center">re.finditer()</td>
<td style="text-align:center">在字符串中查找所有满足条件的子串，返回匹配出的macth对象的iterator</td>
</tr>
<tr>
<td style="text-align:center">re.split()</td>
<td style="text-align:center">将正则表达式作为separator来分割字符串，返回string list</td>
</tr>
<tr>
<td style="text-align:center">re.sub()</td>
<td style="text-align:center">在字符串中替换所有匹配正则表达式的子串，返回替换后的字符串</td>
</tr>
<tr>
<td style="text-align:center">re.search()</td>
<td style="text-align:center">在字符串中查找匹配的子串第一次出现的位置，匹配成功返回match对象，否则返回None</td>
</tr>
<tr>
<td style="text-align:center">re.match()</td>
<td style="text-align:center">从字符串的起始位置开始匹配，即匹配字符串的开头是否和正则表达式匹配，返回match对象或None</td>
</tr>
<tr>
<td style="text-align:center">re.fullmatch()</td>
<td style="text-align:center">匹配整个字符串是否和正则表达式匹配，返回match对象或None</td>
</tr>
<tr>
<td style="text-align:center">re.escape()</td>
<td style="text-align:center">自动在字符串中为特殊字符添加 “\” 转义符，返回修改后的字符串 <br> 具体见下文解释</td>
</tr>
</tbody>
</table>
<p><strong>参数说明：</strong></p>
<ul>
<li>re.findall(pattern, string, flags=0)<br>pattern: 表示正则表达式的字符串，推荐使用python原生字符串<code>r&quot;string&quot;</code><br>flags: 正则表达式的控制标记<br>return: 返回string list，list中每一项表示匹配出来的字符串</li>
<li>re.sub(pattern, repl, string, count=0, flags=0)<br>repl: 用来替代匹配到的子串的字符串</li>
<li>re.search(pattern, string, flags=0)<br>参数同上<br>return: 匹配成功返回match对象，否则返回None</li>
<li>re.match(pattern, string, flags=0)<br>参数同上<br>return：匹配成功返回match对象，否则返回None</li>
<li>re.fullmatch(pattern, string, flags=0)<br>参数同上<br>return：匹配成功返回match对象，否则返回Non</li>
<li>re.escape(pattern)<br>eg. <code>pattern1 = re.escape(&#39;python.exe&#39;))</code>，pattern1就为”python\.exe”，可直接作为pattern参数传入其他函数中，用来匹配“python.exe”。当pattern含有大量特殊字符时使用这个函数就很方便。</li>
</ul>
<h4 id="Match类"><a href="#Match类" class="headerlink" title="Match类"></a>Match类</h4><p>re.search()和re.match()两个函数的返回对象，包含了匹配的相关信息，常用函数和属性如下：</p>
<table>
<thead>
<tr>
<th style="text-align:center">名称</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">match.group()</td>
<td style="text-align:left">返回特定的分组，string或tuple的形式</td>
</tr>
<tr>
<td style="text-align:center">match.start()</td>
<td style="text-align:left">返回特定分组的起始地址</td>
</tr>
<tr>
<td style="text-align:center">match.end()</td>
<td style="text-align:left">返回特定分组的结束地址 <br>（会比实际大1位，因为python字符串截取前闭后开的特性）</td>
</tr>
<tr>
<td style="text-align:center">match.string</td>
<td style="text-align:left">为传入到re.search()或re.match()的待匹配字符串</td>
</tr>
<tr>
<td style="text-align:center">match.groups()</td>
<td style="text-align:left">以tuple的形式返回所有分组，element即为各个分组</td>
</tr>
</tbody>
</table>
<ul>
<li>match.group([group1(int), …])<br>[group1]（可选）：需要返回的组号；没有传参时组号默认为0，对应整个匹配到的字符串，通常情况不用传参数即可。<br>这里的分组指的就是在正则表达式中通过小括号<code>()</code>指定的分组，每个分组从左到右会有一个组号，且组号从1开始。<br>return: string字符串</li>
<li>match.start([group])、match.end([group])<br>两个函数中group都是指组号，返回特定组号的起始、终止地址，默认即指整个匹配的字符串，见小节开头的例子；</li>
<li>分组的对应子串可通过<code>match.string[m.start(g):m.end(g)]</code>来获取。</li>
</ul>
<h4 id="控制标记flag介绍"><a href="#控制标记flag介绍" class="headerlink" title="控制标记flag介绍"></a>控制标记flag介绍</h4><p>用于规定正则表达式的一些匹配规则，作为<code>flags</code>参数传入正则表达式函数<br>|标记名(简写/全称)|含义|<br>|:-:|:-|<br>|re.A / re.ASCII|使\w,\b,\s和\d只匹配ASCII字符 <br> eg. 不会匹配汉字和其他Unicode字符|<br>|re.I / re.IGNORECASE|忽略正则表达式大小写|<br>|re.M / re.MULTILINE|使得^表示每一行的开始，$表示每一行的结束 <br> 原义仅表示一个单词的开始和结束|<br>|re.S / re.DOTALL|使得.可以匹配\n字符|<br>|re.X / re.VERBOSE|忽略正则表达式内部的空白符|<br>注：这些变量在VSCode的python下没有提示，但可以运行。</p>
<h4 id="str-replace-和re-sub的比较"><a href="#str-replace-和re-sub的比较" class="headerlink" title="str.replace()和re.sub的比较"></a>str.replace()和re.sub的比较</h4><ul>
<li>str.replace(old, new[, count])是字符串的替代函数，其中new为替换的字符串，old为待替换的字符串，old只能为substring而不能为字符串，因此替换功能较为简单。</li>
<li>re.sub(pattern, repl, string, count=0, flags=0)则使用了正则表达式，可进行更复杂的替换操作，但同时开销也更大。</li>
<li>因此能用replace()尽量用，复杂的替换操作再使用正则表达式。</li>
</ul>

            <div class="post-copyright">
    <hr />
    <div class="content">
        <p>Post Date： 2019-02-07</p>
        <p>版权声明：&nbsp;本文为原创文章，转载请注明出处</p>
    </div>
</div>

      
        
            

        
    </div>
    <footer class="article-footer">
        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/正则表达式/" class="color1">正则表达式</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Examples"><span class="post-toc-number">1.</span> <span class="post-toc-text">Examples</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#基本语法"><span class="post-toc-number">2.</span> <span class="post-toc-text">基本语法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#一些特殊字符含义"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">一些特殊字符含义</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关于-b的一些说明"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">关于\b的一些说明</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#重复匹配限定符"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">重复匹配限定符</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#贪婪、懒惰匹配原则"><span class="post-toc-number">2.3.1.</span> <span class="post-toc-text">贪婪、懒惰匹配原则</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#字符类"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">字符类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#分枝条件"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">分枝条件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#注释"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">注释</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#正则表达式高级特性"><span class="post-toc-number">3.</span> <span class="post-toc-text">正则表达式高级特性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#分组"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">分组</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#后向引用"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">后向引用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#零宽断言"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">零宽断言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#负向零宽断言"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">负向零宽断言</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#递归匹配"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">递归匹配</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#在Python中使用正则表达式"><span class="post-toc-number">4.</span> <span class="post-toc-text">在Python中使用正则表达式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用原生字符串"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">使用原生字符串</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#re库"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">re库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#常用函数介绍"><span class="post-toc-number">4.2.1.</span> <span class="post-toc-text">常用函数介绍</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Match类"><span class="post-toc-number">4.2.2.</span> <span class="post-toc-text">Match类</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#控制标记flag介绍"><span class="post-toc-number">4.2.3.</span> <span class="post-toc-text">控制标记flag介绍</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#str-replace-和re-sub的比较"><span class="post-toc-number">4.2.4.</span> <span class="post-toc-text">str.replace()和re.sub的比较</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>
    



    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2019 Ren Li<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "https://renli1024.github.io",
      animate: false,
      isHome: false,
      share: false,
      reward: 1
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/Algorithm/" style="font-size: 13.33px;">Algorithm</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/C-Sharp/" style="font-size: 10px;">C_Sharp</a> <a href="/tags/English/" style="font-size: 15px;">English</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Lingo/" style="font-size: 10px;">Lingo</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/MachineLearning/" style="font-size: 10px;">MachineLearning</a> <a href="/tags/Math/" style="font-size: 10px;">Math</a> <a href="/tags/Matlab/" style="font-size: 11.67px;">Matlab</a> <a href="/tags/Network/" style="font-size: 16.67px;">Network</a> <a href="/tags/Other/" style="font-size: 20px;">Other</a> <a href="/tags/Paper-Notes/" style="font-size: 15px;">Paper Notes</a> <a href="/tags/Python/" style="font-size: 18.33px;">Python</a> <a href="/tags/SQL/" style="font-size: 10px;">SQL</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/TensorFlow/" style="font-size: 18.33px;">TensorFlow</a> <a href="/tags/cs224n/" style="font-size: 16.67px;">cs224n</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/课程笔记/" style="font-size: 10px;">课程笔记</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a  href="/">
                    <i class="fa fa-home"></i><span>Home</span>
                </a>
            </li>
            
            <li>
                <a  href="/archives">
                    <i class="fa fa-archive"></i><span>Archives</span>
                </a>
            </li>
            
            <li>
                <a  href="https://github.com/lrStyle">
                    <i class="fa fa-user"></i><span>Github</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/Algorithm/" style="font-size: 13.33px;">Algorithm</a> <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/C-Sharp/" style="font-size: 10px;">C_Sharp</a> <a href="/tags/English/" style="font-size: 15px;">English</a> <a href="/tags/Git/" style="font-size: 10px;">Git</a> <a href="/tags/JSP/" style="font-size: 10px;">JSP</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Lingo/" style="font-size: 10px;">Lingo</a> <a href="/tags/Linux/" style="font-size: 10px;">Linux</a> <a href="/tags/Mac/" style="font-size: 10px;">Mac</a> <a href="/tags/MachineLearning/" style="font-size: 10px;">MachineLearning</a> <a href="/tags/Math/" style="font-size: 10px;">Math</a> <a href="/tags/Matlab/" style="font-size: 11.67px;">Matlab</a> <a href="/tags/Network/" style="font-size: 16.67px;">Network</a> <a href="/tags/Other/" style="font-size: 20px;">Other</a> <a href="/tags/Paper-Notes/" style="font-size: 15px;">Paper Notes</a> <a href="/tags/Python/" style="font-size: 18.33px;">Python</a> <a href="/tags/SQL/" style="font-size: 10px;">SQL</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/TensorFlow/" style="font-size: 18.33px;">TensorFlow</a> <a href="/tags/cs224n/" style="font-size: 16.67px;">cs224n</a> <a href="/tags/正则表达式/" style="font-size: 10px;">正则表达式</a> <a href="/tags/课程笔记/" style="font-size: 10px;">课程笔记</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>
<script src="/js/search.js"></script>
<script src="/js/main.js"></script>









  <script src="/js/pop-img.js"></script>
  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>